"0","# Selecionar as variáveis a serem utilizadas"
"0","# Remover as observações com valores faltantes ou perguntas não respondidas"
"0","wvs <- wvs_df %>% "
"0","  as_tibble() %>% "
"0","  select(W_WEIGHT, country = B_COUNTRY_ALPHA, A_STUDY, A_WAVE, S018, S025,"
"0","         happy = Q46, gender = Q260, age = Q262, age6 = X003R, marital = Q273,"
"0","         children = Q274, educ = Q275, educ3 = Q275R, job = Q279, chief = Q285,"
"0","         mpol_leader = Q29, conf_wmov = Q80, member_wgroup = Q104, w_lcorrupt = Q119,"
"0","         religious = Q173, prostitution = Q183, abortion = Q184, divorce = Q185,"
"0","         m_beatw = Q189, interest_pol = Q199, discuss_pol = Q200, w_poleq = Q233,"
"0","         wsame_rights = Q249, incomel = Q288R) %>% "
"0","  filter(if_all(where(is.numeric), ~ . >= 0),"
"0","         job != 8)"
"0",""
"0","# Ajuste das variáveis e criação do índice identidade"
"0","wvs <- wvs %>% "
"0","  mutate(across(c(wsame_rights, prostitution, abortion, divorce, m_beatw), ~ . / 10), # normalizando indices de 0 a 10"
"0","         mpol_leader = ifelse(mpol_leader <= 2, 0, 1),"
"0","         conf_wmov = ifelse(conf_wmov <= 2, 1, 0),"
"0","         w_lcorrupt = ifelse(w_lcorrupt <= 2, 1, 0),"
"0","         m_beatw = 1 - m_beatw) %>% "
"0","  mutate(identidade = mpol_leader + conf_wmov + w_lcorrupt + wsame_rights +"
"0","                      prostitution + abortion + divorce + m_beatw) "
"0",""
"0","# Ajustes de tipos e calculo do multiplicador do peso amostral"
"0","wvs <- wvs %>% "
"0","  mutate(across(c(country, gender, age6, marital, educ3, job, chief,"
"0","                  mpol_leader, conf_wmov, member_wgroup, w_lcorrupt,"
"0","                  religious, wsame_rights, incomel), as.factor)) %>% "
"0","  group_by(country) %>%"
"0","  mutate(S018R = 1000 / n()) %>%"
"0","  mutate(age2 = age^2,"
"0","         happy = ifelse(happy <=2, 1, 0),"
"0","         gender = fct_recode(gender,"
"0","                          ""Male"" = ""1"","
"0","                          ""Female"" = ""2""),"
"0","         marital = fct_collapse(marital, "
"0","                                ""Married"" = c(""1"", ""2""),"
"0","                                ""Divorced"" = ""3"","
"0","                                ""Separated"" = ""4"","
"0","                                ""Widowed"" = ""5"","
"0","                                ""Single"" = ""6""),"
"0","         job = fct_collapse(job,"
"0","                            ""Full-time"" = c(""1"", ""3""),"
"0","                            ""Not working"" = c(""2"", ""4"", ""6""),"
"0","                            ""Housewife"" = ""5"","
"0","                            ""Unemployed"" = ""7""),"
"0","         chief = fct_recode(chief,"
"0","                            ""0"" = ""2"","
"0","                            ""1"" = ""1""),"
"0","         member_wgroup = fct_collapse(member_wgroup,"
"0","                                      ""0"" = ""0"","
"0","                                      ""1"" = c(""1"", ""2"")),"
"0","         religious = fct_collapse(religious,"
"0","                                  ""Religious"" = ""1"","
"0","                                  ""Not religious"" = c(""2"", ""3"")))"
